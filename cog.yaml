build:
  gpu: true
  cuda: "12.1"
  system_packages:
    - ffmpeg
    - nano
  python_version: "3.10.6"
  python_packages:
    - torch<=2.6.0
    - torchvision<=0.21.0
    - torchaudio<=2.6.0
    - torchsde<=0.2.6
    - einops<=0.8.0
    - transformers<=4.48.2
    - tokenizers<=0.21.0
    - sentencepiece<=0.2.0
    - safetensors<=0.5.2
    - aiohttp<=3.11.11
    - accelerate<=1.3.0
    - pyyaml<=6.0.2
    - Pillow<=11.1.0
    - scipy<=1.15.1
    - tqdm<=4.67.1
    - psutil<=6.1.1
    - spandrel<=0.4.1
    - soundfile<=0.13.1
    - kornia<=0.8.0
    - websocket-client<=1.6.3
    - diffusers<=0.32.2
    - pyequilib<=0.5.8
    - ipython<=8.32.0
    - blend_modes<=2.2.0
    - wget<=3.2
    - minio<=7.2.15
    - imageio<=2.37.0
    - requests<=2.32.3
    - tqdm<=4.67.1
    - albumentations<=1.4.3
    - python-dotenv>=1.0.1
    
    # was-node-suite-comfyui
    - cmake<=3.31.4
    - imageio<=2.37.0
    - joblib<=1.4.2
    - matplotlib<=3.10.0
    - pilgram<=1.2.1
    - scikit-learn<=1.6.1
    - rembg<=2.0.62

    # ComfyUI_essentials
    - numba<=0.61.0

    # comfyui_controlnet_aux
    - importlib_metadata<=8.6.1
    - opencv-python-headless<=4.11.0.86
    - filelock<=3.17.0
    - numpy<=1.26.4
    - scikit-image<=0.25.1
    - python-dateutil<=2.9.0.post0
    - mediapipe<=0.10.20
    - svglib<=1.5.1
    - fvcore<=0.1.5.post20221221
    - yapf<=0.43.0
    - omegaconf<=2.3.0
    - ftfy<=6.3.1
    - addict<=2.4.0
    - yacs<=0.1.8
    - trimesh<=4.6.1
    - ultralytics<=8.3.71
    - segment-anything<=1.0
    - timm<=1.0.14

    # ComfyUI-KJNodes
    - librosa<=0.10.2.post1
    - color-matcher<=0.5.0

    # SUPIR
    - open-clip-torch<=2.30.0
    - pytorch-lightning<=2.5.0.post0

    # For train.py
    - huggingface_hub<=0.28.1
  run:
    - curl -o /usr/local/bin/pget -L "https://github.com/replicate/pget/releases/download/v0.8.1/pget_linux_x86_64" && chmod +x /usr/local/bin/pget
    - pip install onnxruntime-gpu --extra-index-url https://aiinfra.pkgs.visualstudio.com/PublicPackages/_packaging/onnxruntime-cuda-12/pypi/simple/
predict: "predict.py:Predictor"
